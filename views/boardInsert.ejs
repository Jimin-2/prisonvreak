<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!--글꼴 Link-->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300&display=swap" rel="stylesheet">

    <!--CSS-->
    <link rel="stylesheet" type="text/css" href="/css/main.css">
    <link rel="stylesheet" type="text/css" href="/css/boardInsert.css">

    <!-- JavaScript -->
    <script src="/javascript/index.js"></script>

    <!-- Tiny -->
    <!-- <script src="https://cdn.tiny.cloud/1/ho5z8yu4abrkgykc49irtryfln3edsc8p61a17082g5lnxs0/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script> -->

    <!-- 반응형 웹 -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Title-->
    <title> CAN </title>

</head>

<body>

    <!-- header -->
    <%- include('partials/header')%>


        <!-- Section -->
        <section id="section">

            <div id="layout">
                <div id="sectionTitle">
                    <h1> 커뮤니티 글쓰기 </h1>
                    <hr>
                </div>

                <form action="/community/insert" method="post" enctype="multipart/form-data">
                    <div id="titleForm" class="form">
                        <!-- <label for="post_title">Title:</label> -->
                        <div id="userID-form">
                            <p>작성자: <%= userId %> </p>
                        </div>
                        <h4> 제목 </h4>
                        <input type="text" name="post_title" id="post_title" class="form-control"
                            placeholder="제목을 입력해 주세요" required>
                    </div>
                                        
                    <div class="form">
                        <h4> 첨부파일 </h4>
                        <input type="file" name="post_image" id="post_image" class="form-control" accept="image/*" style="font-size: 1em;">
                        <img id="imagePreview" src="#" alt="Image Preview" style="display: none; max-width: 200px;">
                    </div>

                    <div class="form">
                        <!-- <label for="post_content">Content:</label> -->
                        <h4> 내용 </h4>
                        <textarea name="post_content" id="post_content" class="form-control" rows="5"
                            placeholder="내용을 입력해 주세요" required></textarea>
                    </div>

                    <!-- <label for="post_usernum">usernum:</label> -->
                   
                    <!-- <div id="contentForm" class="form">
                     <label for="post_hit">hit:</label>
                    <h4> 조회수 </h4>
                    <textarea name="post_hit" id="post_hit" required></textarea>
                </div>
                <br> -->

                    <div id="btn">
                        <input type="submit" value="글쓰기" class="custom-btn btn-16">
                    </div>
                </form>
            </div>
        </section>

        <!-- footer -->
        <%- include('partials/footer')%>

        <script>
            document.getElementById('post_image').addEventListener('change', function(e) {
                const imageInput = e.target;
                const imagePreview = document.getElementById('imagePreview');
    
                if (imageInput.files && imageInput.files[0]) {
                    const reader = new FileReader();
    
                    reader.onload = function(e) {
                        imagePreview.src = e.target.result;
                        imagePreview.style.display = 'block';
                    }
    
                    reader.readAsDataURL(imageInput.files[0]);
                } else {
                    imagePreview.style.display = 'none';
                }
            });

    //         tinymce.init({
    //             selector: 'textarea',
    //             plugins: 'ai tinycomments mentions anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount checklist mediaembed casechange export formatpainter pageembed permanentpen footnotes advtemplate advtable advcode editimage tableofcontents mergetags powerpaste tinymcespellchecker autocorrect a11ychecker typography inlinecss',
    //             toolbar: 'undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table mergetags | align lineheight | tinycomments | checklist numlist bullist indent outdent | emoticons charmap | removeformat',
    //             tinycomments_mode: 'embedded',
    //             tinycomments_author: 'Author name',
    //             mergetags_list: [
    //                 { value: 'First.Name', title: 'First Name' },
    //                 { value: 'Email', title: 'Email' },
    //             ],
    //             ai_request: (request, respondWith) => respondWith.string(() => Promise.reject("See docs to implement AI Assistant"))
    // });
        </script>

</body>

</html>